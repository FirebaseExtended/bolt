"use strict";
var chai = require('chai');
var assert = chai.assert;
var helper = require('./test-helper');
var bolt = require('../bolt');
var parse = bolt.parse;
var ast = require('../ast');
suite("Abstract Syntax Tree (AST)", function () {
    suite("Left Associative Operators (AND OR)", function () {
        var t = ast.boolean(true);
        var f = ast.boolean(false);
        var v = ast.variable;
        var and = ast.and;
        var or = ast.or;
        var a = v('a');
        var b = v('b');
        var c = v('c');
        var d = v('d');
        var tests = [
            { data: [],
                expect: { and: t, or: f } },
            { data: [t],
                expect: { and: t, or: t } },
            { data: [f],
                expect: { and: f, or: f } },
            { data: [f, t],
                expect: { and: f, or: t } },
            { data: [t, f],
                expect: { and: f, or: t } },
            { data: [t, f, t],
                expect: { and: f, or: t } },
            { data: [f, t, f],
                expect: { and: f, or: t } },
            { data: [a],
                expect: { and: a, or: a } },
            { data: [a, t],
                expect: { and: a, or: t } },
            { data: [a, f],
                expect: { and: f, or: a } },
            { data: [t, a],
                expect: { and: a, or: t } },
            { data: [f, a],
                expect: { and: f, or: a } },
            { data: [t, a, f],
                expect: { and: f, or: t } },
            { data: [f, a, t],
                expect: { and: f, or: t } },
            { data: [a, f, a],
                expect: { and: f, or: ast.or(a, a) } },
            { data: [a, t, a],
                expect: { and: and(a, a), or: t } },
            { data: [and(a, b), and(c, d)],
                expect: { and: and(and(and(a, b), c), d),
                    or: or(and(a, b), and(c, d)) } },
            { data: [or(a, b), or(c, d)],
                expect: { and: and(or(a, b), or(c, d)),
                    or: or(or(or(a, b), c), d) } },
        ];
        helper.dataDrivenTest(tests, function (data, expect) {
            assert.deepEqual(ast.andArray(data), expect.and, 'AND');
            assert.deepEqual(ast.orArray(data), expect.or, 'OR');
        }, helper.expFormat);
    });
    suite("Flatten", function () {
        var v = ast.variable;
        var and = ast.and;
        var a = v('a');
        var b = v('b');
        var c = v('c');
        var d = v('d');
        var tests = [
            { data: a,
                expect: [a] },
            { data: and(a, b),
                expect: [a, b] },
            { data: and(a, b),
                expect: [a, b] },
            { data: and(and(a, b), c),
                expect: [a, b, c] },
            { data: and(a, and(b, c)),
                expect: [a, b, c] },
            { data: and(and(a, b), and(c, d)),
                expect: [a, b, c, d] },
        ];
        helper.dataDrivenTest(tests, function (data, expect) {
            var result = ast.flatten('&&', data);
            assert.deepEqual(result, expect);
        }, helper.expFormat);
    });
    suite("isIdentifierString", function () {
        var tests = [
            [ast.string('hi'), true],
            [ast.string('Hi'), true],
            [ast.string('a'), true],
            [ast.string('A'), true],
            [ast.string('hiThere'), true],
            [ast.string('H123'), true],
            [ast.string('$id'), true],
            [ast.string('a$id'), false],
            [ast.string('a b'), false],
            [ast.string('0H123'), false],
            [ast.boolean(true), false],
            [ast.number(123), false],
            ['hi', false],
        ];
        helper.dataDrivenTest(tests, function (data, expect) {
            var result = ast.isIdentifierStringExp(data);
            assert.equal(result, expect);
        }, helper.expFormat);
    });
    suite("Expression decoding.", function () {
        var tests = [
            ["true"],
            ["false"],
            ["1"],
            ["(1)", '1'],
            ["1.1"],
            ["+3", "3"],
            ["-3"],
            ["0x2", "2"],
            ["\"string\"", "'string'"],
            ["'string'"],
            ["'st\\'ring'"],
            ["'st\\ring'"],
            ["'\\u000d'", "'\\r'"],
            ["/pattern/"],
            ["/pattern/i"],
            ["/pat\\/tern/i"],
            ["a"],
            ["a.b"],
            ["a.b.c"],
            ["a['b']", 'a.b'],
            ["a[b]"],
            ["a[b][c]"],
            ["a.b[c]"],
            ["a[b].c"],
            ["(a.b)[c]", "a.b[c]"],
            ["(a(b))[c]", "a(b)[c]"],
            ["a()"],
            ["a()()"],
            ["a.b()"],
            ["a().b"],
            ["a[0]()"],
            ["a()[0]"],
            ["-a"],
            ["--a"],
            ["+a", "a"],
            ["+a +b", "a + b"],
            ["-a -b", "-a - b"],
            ["-a --b", "-a - -b"],
            ["-a ---b", "-a - --b"],
            ["!a"],
            ["!!a"],
            ["!+a", '!a'],
            ["!-a"],
            ["-!a"],
            ["2 * a"],
            ["(2 * a)", '2 * a'],
            ["2 / a"],
            ["a % 2"],
            ["1 + 1"],
            ["a - 1"],
            ["a - -b"],
            ["a + b + c"],
            ["a + (b + c)"],
            ["(a + b) + c", 'a + b + c'],
            ["a + b * c"],
            ["(a + b) * c"],
            ["a < 7"],
            ["a > 7"],
            ["a <= 7"],
            ["a >= 7"],
            ["a == 3"],
            ["a != 0"],
            ["a === 3", "a == 3"],
            ["a !== 0", "a != 0"],
            ["3 * a == b"],
            ["a == 1 && b <= 2"],
            ["a == 1 || b <= 2"],
            ["a && b && c"],
            ["a || b || c"],
            ["a && b || c && d"],
            ["a ? b : c",],
            ["a || b ? c : d"],
            ["(this + ' ').test(/\d+/)"],
        ];
        helper.dataDrivenTest(tests, function (data, expect) {
            expect = expect || data;
            var result = parse('function f() {return ' + data + ';}');
            var exp = result.functions.f.body;
            var decode = bolt.decodeExpression(exp);
            assert.equal(decode, expect);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvYXN0LXRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQWVBLElBQU8sSUFBSSxXQUFXLE1BQU0sQ0FBQyxDQUFDO0FBQzlCLElBQUksTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7QUFDekIsSUFBTyxNQUFNLFdBQVcsZUFBZSxDQUFDLENBQUM7QUFFekMsSUFBTyxJQUFJLFdBQVcsU0FBUyxDQUFDLENBQUM7QUFDakMsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQztBQUN2QixJQUFPLEdBQUcsV0FBVyxRQUFRLENBQUMsQ0FBQztBQUUvQixLQUFLLENBQUMsNEJBQTRCLEVBQUU7SUFDbEMsS0FBSyxDQUFDLHFDQUFxQyxFQUFFO1FBQzNDLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDMUIsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMzQixJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsUUFBUSxDQUFDO1FBQ3JCLElBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUM7UUFDbEIsSUFBSSxFQUFFLEdBQUcsR0FBRyxDQUFDLEVBQUUsQ0FBQztRQUNoQixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDZixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDZixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDZixJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFFZixJQUFJLEtBQUssR0FBRztZQUNWLEVBQUUsSUFBSSxFQUFFLEVBQUU7Z0JBQ1IsTUFBTSxFQUFFLEVBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFDLEVBQUU7WUFDM0IsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQ1QsTUFBTSxFQUFFLEVBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFDLEVBQUU7WUFDM0IsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQ1QsTUFBTSxFQUFFLEVBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFDLEVBQUU7WUFDM0IsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNaLE1BQU0sRUFBRSxFQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBQyxFQUFFO1lBQzNCLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDWixNQUFNLEVBQUUsRUFBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUMsRUFBRTtZQUMzQixFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNmLE1BQU0sRUFBRSxFQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBQyxFQUFFO1lBQzNCLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ2YsTUFBTSxFQUFFLEVBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFDLEVBQUU7WUFDM0IsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQ1QsTUFBTSxFQUFFLEVBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFDLEVBQUU7WUFDM0IsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNaLE1BQU0sRUFBRSxFQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBQyxFQUFFO1lBQzNCLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENB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LEtBQUssQ0FBQyxTQUFTLEVBQUU7UUFDZixJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsUUFBUSxDQUFDO1FBQ3JCLElBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUM7UUFDbEIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2YsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2YsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2YsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRWYsSUFBSSxLQUFLLEdBQUc7WUFDVixFQUFFLElBQUksRUFBRSxDQUFDO2dCQUNQLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFO1lBQ2YsRUFBRSxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ2YsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO1lBQ2xCLEVBQUUsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNmLE1BQU0sRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRTtZQUNsQixFQUFFLElBQUksRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ3ZCLE1BQU0sRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7WUFDckIsRUFBRSxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUN2QixNQUFNLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO1lBQ3JCLEVBQUUsSUFBSSxFQUFFLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxD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TyxDQUFFO1lBQ1gsQ0FBRSxRQUFRLENBQUU7WUFDWixDQUFFLFFBQVEsQ0FBRTtZQUNaLENBQUUsUUFBUSxDQUFFO1lBQ1osQ0FBRSxRQUFRLENBQUU7WUFDWixDQUFFLFNBQVMsRUFBRSxRQUFRLENBQUU7WUFDdkIsQ0FBRSxTQUFTLEVBQUUsUUFBUSxDQUFFO1lBQ3ZCLENBQUUsWUFBWSxDQUFFO1lBQ2hCLENBQUUsa0JBQWtCLENBQUU7WUFDdEIsQ0FBRSxrQkFBa0IsQ0FBRTtZQUN0QixDQUFFLGFBQWEsQ0FBRTtZQUNqQixDQUFFLGFBQWEsQ0FBRTtZQUNqQixDQUFFLGtCQUFrQixDQUFFO1lBQ3RCLENBQUUsV0FBVyxFQUFJO1lBQ2pCLENBQUUsZ0JBQWdCLENBQUU7WUFDcEIsQ0FBRSwwQkFBMEIsQ0FBRTtTQUMvQixDQUFDO1FBRUYsTUFBTSxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsVUFBUyxJQUFJLEVBQUUsTUFBTTtZQUVoRCxNQUFNLEdBQUcsTUFBTSxJQUFJLElBQUksQ0FBQztZQUN4QixJQUFJLE1BQU0sR0FBRyxLQUFLLENBQUMsdUJBQXVCLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDO1lBQzFELElBQUksR0FBRyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztZQUNsQyxJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDeEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDL0IsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwiZmlsZSI6InRlc3QvYXN0LXRlc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBDb3B5cmlnaHQgMjAxNSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmltcG9ydCBjaGFpID0gcmVxdWlyZSgnY2hhaScpO1xyXG52YXIgYXNzZXJ0ID0gY2hhaS5hc3NlcnQ7XHJcbmltcG9ydCBoZWxwZXIgPSByZXF1aXJlKCcuL3Rlc3QtaGVscGVyJyk7XHJcblxyXG5pbXBvcnQgYm9sdCA9IHJlcXVpcmUoJy4uL2JvbHQnKTtcclxudmFyIHBhcnNlID0gYm9sdC5wYXJzZTtcclxuaW1wb3J0IGFzdCA9IHJlcXVpcmUoJy4uL2FzdCcpO1xyXG5cclxuc3VpdGUoXCJBYnN0cmFjdCBTeW50YXggVHJlZSAoQVNUKVwiLCBmdW5jdGlvbigpIHtcclxuICBzdWl0ZShcIkxlZnQgQXNzb2NpYXRpdmUgT3BlcmF0b3JzIChBTkQgT1IpXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHQgPSBhc3QuYm9vbGVhbih0cnVlKTtcclxuICAgIHZhciBmID0gYXN0LmJvb2xlYW4oZmFsc2UpO1xyXG4gICAgdmFyIHYgPSBhc3QudmFyaWFibGU7XHJcbiAgICB2YXIgYW5kID0gYXN0LmFuZDtcclxuICAgIHZhciBvciA9IGFzdC5vcjtcclxuICAgIHZhciBhID0gdignYScpO1xyXG4gICAgdmFyIGIgPSB2KCdiJyk7XHJcbiAgICB2YXIgYyA9IHYoJ2MnKTtcclxuICAgIHZhciBkID0gdignZCcpO1xyXG5cclxuICAgIHZhciB0ZXN0cyA9IFtcclxuICAgICAgeyBkYXRhOiBbXSxcclxuICAgICAgICBleHBlY3Q6IHthbmQ6IHQsIG9yOiBmfSB9LFxyXG4gICAgICB7IGRhdGE6IFt0XSxcclxuICAgICAgICBleHBlY3Q6IHthbmQ6IHQsIG9yOiB0fSB9LFxyXG4gICAgICB7IGRhdGE6IFtmXSxcclxuICAgICAgICBleHBlY3Q6IHthbmQ6IGYsIG9yOiBmfSB9LFxyXG4gICAgICB7IGRhdGE6IFtmLCB0XSxcclxuICAgICAgICBleHBlY3Q6IHthbmQ6IGYsIG9yOiB0fSB9LFxyXG4gICAgICB7IGRhdGE6IFt0LCBmXSxcclxuICAgICAgICBleHBlY3Q6IHthbmQ6IGYsIG9yOiB0fSB9LFxyXG4gICAgICB7IGRhdGE6IFt0LCBmLCB0XSxcclxuICAgICAgICBleHBlY3Q6IHthbmQ6IGYsIG9yOiB0fSB9LFxyXG4gICAgICB7IGRhdGE6IFtmLCB0LCBmXSxcclxuICAgICAgICBleHBlY3Q6IHthbmQ6IGYsIG9yOiB0fSB9LFxyXG4gICAgICB7IGRhdGE6IFthXSxcclxuICAgICAgICBleHBlY3Q6IHthbmQ6IGEsIG9yOiBhfSB9LFxyXG4gICAgICB7IGRhdGE6IFthLCB0XSxcclxuICAgICAgICBleHBlY3Q6IHthbmQ6IGEsIG9yOiB0fSB9LFxyXG4gICAgICB7IGRhdGE6IFthLCBmXSxcclxuICAgICAgICBleHBlY3Q6IHthbmQ6IGYsIG9yOiBhfSB9LFxyXG4gICAgICB7IGRhdGE6IFt0LCBhXSxcclxuICAgICAgICBleHBlY3Q6IHthbmQ6IGEsIG9yOiB0fSB9LFxyXG4gICAgICB7IGRhdGE6IFtmLCBhXSxcclxuICAgICAgICBleHBlY3Q6IHthbmQ6IGYsIG9yOiBhfSB9LFxyXG4gICAgICB7IGRhdGE6IFt0LCBhLCBmXSxcclxuICAgICAgICBleHBlY3Q6IHthbmQ6IGYsIG9yOiB0fSB9LFxyXG4gICAgICB7IGRhdGE6IFtmLCBhLCB0XSxcclxuICAgICAgICBleHBlY3Q6IHthbmQ6IGYsIG9yOiB0fSB9LFxyXG4gICAgICB7IGRhdGE6IFthLCBmLCBhXSxcclxuICAgICAgICBleHBlY3Q6IHthbmQ6IGYsIG9yOiBhc3Qub3IoYSwgYSl9IH0sXHJcbiAgICAgIHsgZGF0YTogW2EsIHQsIGFdLFxyXG4gICAgICAgIGV4cGVjdDoge2FuZDogYW5kKGEsIGEpLCBvcjogdH0gfSxcclxuICAgICAgeyBkYXRhOiBbYW5kKGEsIGIpLCBhbmQoYywgZCldLFxyXG4gICAgICAgIGV4cGVjdDoge2FuZDogYW5kKGFuZChhbmQoYSwgYiksIGMpLCBkKSxcclxuICAgICAgICAgICAgICAgICBvcjogb3IoYW5kKGEsIGIpLCBhbmQoYywgZCkpfSB9LFxyXG4gICAgICB7IGRhdGE6IFtvcihhLCBiKSwgb3IoYywgZCldLFxyXG4gICAgICAgIGV4cGVjdDoge2FuZDogYW5kKG9yKGEsIGIpLCBvcihjLCBkKSksXHJcbiAgICAgICAgICAgICAgICAgb3I6IG9yKG9yKG9yKGEsIGIpLCBjKSwgZCl9IH0sXHJcbiAgICBdO1xyXG5cclxuICAgIGhlbHBlci5kYXRhRHJpdmVuVGVzdCh0ZXN0cywgZnVuY3Rpb24oZGF0YSwgZXhwZWN0KSB7XHJcbiAgICAgIGFzc2VydC5kZWVwRXF1YWwoYXN0LmFuZEFycmF5KGRhdGEpLCBleHBlY3QuYW5kLCAnQU5EJyk7XHJcbiAgICAgIGFzc2VydC5kZWVwRXF1YWwoYXN0Lm9yQXJyYXkoZGF0YSksIGV4cGVjdC5vciwgJ09SJyk7XHJcbiAgICB9LCBoZWxwZXIuZXhwRm9ybWF0KTtcclxuICB9KTtcclxuXHJcbiAgc3VpdGUoXCJGbGF0dGVuXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHYgPSBhc3QudmFyaWFibGU7XHJcbiAgICB2YXIgYW5kID0gYXN0LmFuZDtcclxuICAgIHZhciBhID0gdignYScpO1xyXG4gICAgdmFyIGIgPSB2KCdiJyk7XHJcbiAgICB2YXIgYyA9IHYoJ2MnKTtcclxuICAgIHZhciBkID0gdignZCcpO1xyXG5cclxuICAgIHZhciB0ZXN0cyA9IFtcclxuICAgICAgeyBkYXRhOiBhLFxyXG4gICAgICAgIGV4cGVjdDogW2FdIH0sXHJcbiAgICAgIHsgZGF0YTogYW5kKGEsIGIpLFxyXG4gICAgICAgIGV4cGVjdDogW2EsIGJdIH0sXHJcbiAgICAgIHsgZGF0YTogYW5kKGEsIGIpLFxyXG4gICAgICAgIGV4cGVjdDogW2EsIGJdIH0sXHJcbiAgICAgIHsgZGF0YTogYW5kKGFuZChhLCBiKSwgYyksXHJcbiAgICAgICAgZXhwZWN0OiBbYSwgYiwgY10gfSxcclxuICAgICAgeyBkYXRhOiBhbmQoYSwgYW5kKGIsIGMpKSxcclxuICAgICAgICBleHBlY3Q6IFthLCBiLCBjXSB9LFxyXG4gICAgICB7IGRhdGE6IGFuZChhbmQoYSwgYiksIGFuZChjLCBkKSksXHJcbiAgICAgICAgZXhwZWN0OiBbYSwgYiwgYywgZF0gfSxcclxuICAgIF07XHJcblxyXG4gICAgaGVscGVyLmRhdGFEcml2ZW5UZXN0KHRlc3RzLCBmdW5jdGlvbihkYXRhLCBleHBlY3QpIHtcclxuICAgICAgdmFyIHJlc3VsdCA9IGFzdC5mbGF0dGVuKCcmJicsIGRhdGEpO1xyXG4gICAgICBhc3NlcnQuZGVlcEVxdWFsKHJlc3VsdCwgZXhwZWN0KTtcclxuICAgIH0sIGhlbHBlci5leHBGb3JtYXQpO1xyXG4gIH0pO1xyXG5cclxuICBzdWl0ZShcImlzSWRlbnRpZmllclN0cmluZ1wiLCBmdW5jdGlvbigpIHtcclxuICAgIGxldCB0ZXN0cyA9IFtcclxuICAgICAgW2FzdC5zdHJpbmcoJ2hpJyksIHRydWVdLFxyXG4gICAgICBbYXN0LnN0cmluZygnSGknKSwgdHJ1ZV0sXHJcbiAgICAgIFthc3Quc3RyaW5nKCdhJyksIHRydWVdLFxyXG4gICAgICBbYXN0LnN0cmluZygnQScpLCB0cnVlXSxcclxuICAgICAgW2FzdC5zdHJpbmcoJ2hpVGhlcmUnKSwgdHJ1ZV0sXHJcbiAgICAgIFthc3Quc3RyaW5nKCdIMTIzJyksIHRydWVdLFxyXG4gICAgICBbYXN0LnN0cmluZygnJGlkJyksIHRydWVdLFxyXG4gICAgICBbYXN0LnN0cmluZygnYSRpZCcpLCBmYWxzZV0sXHJcbiAgICAgIFthc3Quc3RyaW5nKCdhIGInKSwgZmFsc2VdLFxyXG4gICAgICBbYXN0LnN0cmluZygnMEgxMjMnKSwgZmFsc2VdLFxyXG4gICAgICBbYXN0LmJvb2xlYW4odHJ1ZSksIGZhbHNlXSxcclxuICAgICAgW2FzdC5udW1iZXIoMTIzKSwgZmFsc2VdLFxyXG4gICAgICBbJ2hpJywgZmFsc2VdLFxyXG4gICAgXTtcclxuXHJcbiAgICBoZWxwZXIuZGF0YURyaXZlblRlc3QodGVzdHMsIGZ1bmN0aW9uKGRhdGEsIGV4cGVjdCkge1xyXG4gICAgICB2YXIgcmVzdWx0ID0gYXN0LmlzSWRlbnRpZmllclN0cmluZ0V4cChkYXRhKTtcclxuICAgICAgYXNzZXJ0LmVxdWFsKHJlc3VsdCwgZXhwZWN0KTtcclxuICAgIH0sIGhlbHBlci5leHBGb3JtYXQpO1xyXG4gIH0pO1xyXG5cclxuICBzdWl0ZShcIkV4cHJlc3Npb24gZGVjb2RpbmcuXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHRlc3RzID0gW1xyXG4gICAgICBbIFwidHJ1ZVwiIF0sXHJcbiAgICAgIFsgXCJmYWxzZVwiIF0sXHJcbiAgICAgIFsgXCIxXCIgXSxcclxuICAgICAgWyBcIigxKVwiLCAnMScgXSxcclxuICAgICAgWyBcIjEuMVwiIF0sXHJcbiAgICAgIFsgXCIrM1wiLCBcIjNcIl0sXHJcbiAgICAgIFsgXCItM1wiIF0sXHJcbiAgICAgIFsgXCIweDJcIiwgXCIyXCIgXSxcclxuICAgICAgWyBcIlxcXCJzdHJpbmdcXFwiXCIsIFwiJ3N0cmluZydcIiBdLFxyXG4gICAgICBbIFwiJ3N0cmluZydcIiBdLFxyXG4gICAgICBbIFwiJ3N0XFxcXCdyaW5nJ1wiXSxcclxuICAgICAgWyBcIidzdFxcXFxyaW5nJ1wiIF0sXHJcbiAgICAgIFsgXCInXFxcXHUwMDBkJ1wiLCBcIidcXFxccidcIiBdLFxyXG4gICAgICBbIFwiL3BhdHRlcm4vXCIgXSxcclxuICAgICAgWyBcIi9wYXR0ZXJuL2lcIiBdLFxyXG4gICAgICBbIFwiL3BhdFxcXFwvdGVybi9pXCIgXSxcclxuICAgICAgWyBcImFcIiBdLFxyXG4gICAgICBbIFwiYS5iXCIgXSxcclxuICAgICAgWyBcImEuYi5jXCIgXSxcclxuXHJcbiAgICAgIFsgXCJhWydiJ11cIiwgJ2EuYicgXSxcclxuICAgICAgWyBcImFbYl1cIiBdLFxyXG4gICAgICBbIFwiYVtiXVtjXVwiIF0sXHJcbiAgICAgIFsgXCJhLmJbY11cIiBdLFxyXG4gICAgICBbIFwiYVtiXS5jXCIgXSxcclxuICAgICAgWyBcIihhLmIpW2NdXCIsIFwiYS5iW2NdXCIgXSxcclxuICAgICAgWyBcIihhKGIpKVtjXVwiLCBcImEoYilbY11cIiBdLFxyXG5cclxuICAgICAgWyBcImEoKVwiIF0sXHJcbiAgICAgIFsgXCJhKCkoKVwiIF0sXHJcbiAgICAgIFsgXCJhLmIoKVwiIF0sXHJcbiAgICAgIFsgXCJhKCkuYlwiIF0sXHJcbiAgICAgIFsgXCJhWzBdKClcIiBdLFxyXG4gICAgICBbIFwiYSgpWzBdXCIgXSxcclxuXHJcbiAgICAgIFsgXCItYVwiIF0sXHJcbiAgICAgIFsgXCItLWFcIiBdLFxyXG4gICAgICBbIFwiK2FcIiwgXCJhXCJdLFxyXG4gICAgICBbIFwiK2EgK2JcIiwgXCJhICsgYlwiIF0sXHJcbiAgICAgIFsgXCItYSAtYlwiLCBcIi1hIC0gYlwiIF0sXHJcbiAgICAgIFsgXCItYSAtLWJcIiwgXCItYSAtIC1iXCIgXSxcclxuICAgICAgWyBcIi1hIC0tLWJcIiwgXCItYSAtIC0tYlwiIF0sXHJcbiAgICAgIFsgXCIhYVwiIF0sXHJcbiAgICAgIFsgXCIhIWFcIiBdLFxyXG4gICAgICBbIFwiISthXCIsICchYScgXSxcclxuICAgICAgWyBcIiEtYVwiIF0sXHJcbiAgICAgIFsgXCItIWFcIiBdLFxyXG4gICAgICBbIFwiMiAqIGFcIiBdLFxyXG4gICAgICBbIFwiKDIgKiBhKVwiLCAnMiAqIGEnIF0sXHJcbiAgICAgIFsgXCIyIC8gYVwiIF0sXHJcbiAgICAgIFsgXCJhICUgMlwiIF0sXHJcbiAgICAgIFsgXCIxICsgMVwiIF0sXHJcbiAgICAgIFsgXCJhIC0gMVwiIF0sXHJcbiAgICAgIFsgXCJhIC0gLWJcIiBdLFxyXG4gICAgICBbIFwiYSArIGIgKyBjXCIgXSxcclxuICAgICAgWyBcImEgKyAoYiArIGMpXCIgXSxcclxuICAgICAgWyBcIihhICsgYikgKyBjXCIsICdhICsgYiArIGMnIF0sXHJcbiAgICAgIFsgXCJhICsgYiAqIGNcIiBdLFxyXG4gICAgICBbIFwiKGEgKyBiKSAqIGNcIiBdLFxyXG4gICAgICBbIFwiYSA8IDdcIiBdLFxyXG4gICAgICBbIFwiYSA+IDdcIiBdLFxyXG4gICAgICBbIFwiYSA8PSA3XCIgXSxcclxuICAgICAgWyBcImEgPj0gN1wiIF0sXHJcbiAgICAgIFsgXCJhID09IDNcIiBdLFxyXG4gICAgICBbIFwiYSAhPSAwXCIgXSxcclxuICAgICAgWyBcImEgPT09IDNcIiwgXCJhID09IDNcIiBdLFxyXG4gICAgICBbIFwiYSAhPT0gMFwiLCBcImEgIT0gMFwiIF0sXHJcbiAgICAgIFsgXCIzICogYSA9PSBiXCIgXSxcclxuICAgICAgWyBcImEgPT0gMSAmJiBiIDw9IDJcIiBdLFxyXG4gICAgICBbIFwiYSA9PSAxIHx8IGIgPD0gMlwiIF0sXHJcbiAgICAgIFsgXCJhICYmIGIgJiYgY1wiIF0sXHJcbiAgICAgIFsgXCJhIHx8IGIgfHwgY1wiIF0sXHJcbiAgICAgIFsgXCJhICYmIGIgfHwgYyAmJiBkXCIgXSxcclxuICAgICAgWyBcImEgPyBiIDogY1wiLCAgXSxcclxuICAgICAgWyBcImEgfHwgYiA/IGMgOiBkXCIgXSxcclxuICAgICAgWyBcIih0aGlzICsgJyAnKS50ZXN0KC9cXGQrLylcIiBdLFxyXG4gICAgXTtcclxuXHJcbiAgICBoZWxwZXIuZGF0YURyaXZlblRlc3QodGVzdHMsIGZ1bmN0aW9uKGRhdGEsIGV4cGVjdCkge1xyXG4gICAgICAvLyBEZWNvZGUgdG8gc2VsZiBieSBkZWZhdWx0XHJcbiAgICAgIGV4cGVjdCA9IGV4cGVjdCB8fCBkYXRhO1xyXG4gICAgICB2YXIgcmVzdWx0ID0gcGFyc2UoJ2Z1bmN0aW9uIGYoKSB7cmV0dXJuICcgKyBkYXRhICsgJzt9Jyk7XHJcbiAgICAgIHZhciBleHAgPSByZXN1bHQuZnVuY3Rpb25zLmYuYm9keTtcclxuICAgICAgdmFyIGRlY29kZSA9IGJvbHQuZGVjb2RlRXhwcmVzc2lvbihleHApO1xyXG4gICAgICBhc3NlcnQuZXF1YWwoZGVjb2RlLCBleHBlY3QpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
